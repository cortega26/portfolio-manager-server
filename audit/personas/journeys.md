# Persona Journeys & Pain Points

Each table maps a persona’s path through the required flows. Severity levels use **Blocker / Major / Minor**; confidence reflects evidence strength.

## Erin “RIA” Carter
| Flow | Step & Goal | What Erin Sees/Does | Pain (Severity/Confidence) | Risk if Unresolved | Proposed Improvement |
| --- | --- | --- | --- | --- | --- |
| Onboarding | Enter portfolio ID + API key to load client data | Uses Portfolio Controls to submit credentials and rotate keys.【F:src/components/PortfolioControls.jsx†L121-L209】 | Raw HTTP errors surface verbatim (e.g., “GET … failed with status 403”), which overwhelm non-technical staff. **(Major / High)**【F:src/components/PortfolioControls.jsx†L89-L118】 | Delays onboarding and increases compliance escalations when advisors misinterpret transport errors. | Map known API errors to human-readable copy (e.g., “Check the API key”) and include request IDs from `error.requestId`. |
| ROI vs SPY | Refresh dashboard KPIs before client meetings | Clicks “Refresh ROI” and expects up-to-date charts.【F:src/components/DashboardTab.jsx†L148-L198】 | Price fetch failures silently zero out valuations; only `console.error` fires. **(Major / High)**【F:src/App.jsx†L129-L146】 | Advisors may brief clients with missing holdings valuation, eroding trust. | Surface a toast/banner when price fetch fails and retain last known good values instead of zeroing. |
| Exports | Prepare onboarding data from legacy systems | Follows README instructions to “Open Reports → Import” but UI only shows export cards.【F:README.md†L200-L210】【F:src/components/ReportsTab.jsx†L49-L100】 | Import workflow documented in README is absent in UI. **(Blocker / High)** | Advisors cannot bulk-load legacy transactions, forcing manual entry and risking data loss. | Either implement the import preview described in README or update docs + UI to direct users to the supported ingestion path. |
| Settings | Tweak display currency before producing statements | Adjusts display settings and expects them to persist cross-device.【F:src/components/SettingsTab.jsx†L93-L151】 | Only localStorage persistence runs; settings are not saved with the portfolio payload. **(Major / High)**【F:src/App.jsx†L211-L215】【F:src/App.jsx†L241-L253】 | Cross-office teammates see divergent settings, complicating shared reviews. | Extend `handleSavePortfolio` payload to include full `settings` state and hydrate them on load. |

## Marcus “DIY” Nguyen
| Flow | Step & Goal | What Marcus Sees/Does | Pain (Severity/Confidence) | Risk if Unresolved | Proposed Improvement |
| --- | --- | --- | --- | --- | --- |
| Import/Add Transactions | Add starting cash before buys | Attempts to submit a `DEPOSIT` without a price in the Transactions form.【F:src/components/TransactionsTab.jsx†L439-L575】 | Form requires Price for all types, blocking deposits/dividends. **(Blocker / High)**【F:src/components/TransactionsTab.jsx†L343-L383】 | Marcus cannot bootstrap his ledger, so he abandons the product. | Skip price validation for cash-only types and hide the field when not applicable. |
| Holdings/Positions | Check allocation after deposit | Portfolio pricing routine fetches tickers including `undefined`.【F:src/App.jsx†L129-L145】 | Requests `/prices/undefined`, producing 404 noise and missing cache hits. **(Major / High)**【F:src/App.jsx†L129-L145】【F:src/utils/api.js†L190-L199】 | Holdings view shows zeros or lags due to repeated failing calls. | Filter falsy tickers before calling `fetchPrices` and log a single warning for unsupported symbols. |
| ROI vs SPY | Verify performance post-trade | Triggers ROI refresh and expects warning on failure.【F:src/App.jsx†L173-L205】 | API errors fall back silently to client-side estimates with no alert. **(Major / High)**【F:src/App.jsx†L173-L195】 | Marcus trusts stale ROI and makes poor rebalance decisions. | Raise a user-facing alert when server returns error, include request ID, and show when fallback math is used. |
| Settings | Sync preferences between laptop and tablet | Enables compact tables & hides balances in Settings.【F:src/components/SettingsTab.jsx†L93-L175】 | Preferences persist only locally; loading same portfolio elsewhere ignores them. **(Major / High)**【F:src/App.jsx†L211-L215】【F:src/App.jsx†L241-L253】 | Inconsistent layouts create confusion and extra verification steps. | Persist full settings with the portfolio JSON and restore on load. |

## Priya “Compliance” Desai
| Flow | Step & Goal | What Priya Sees/Does | Pain (Severity/Confidence) | Risk if Unresolved | Proposed Improvement |
| --- | --- | --- | --- | --- | --- |
| Exports | Archive security events for audits | Reviews Admin tab tables for lockouts and audit entries.【F:src/components/AdminTab.jsx†L410-L558】 | No export/download option for security events despite audit requirements. **(Major / High)**【F:docs/reference/SECURITY.md†L11-L77】【F:src/components/AdminTab.jsx†L410-L558】 | Manual copy/paste risks omissions and fails regulatory evidence checks. | Add CSV export for security events leveraging existing `fetchSecurityEvents` data. |
| Onboarding | Validate API key strength during reviews | Confirms keys via Portfolio Controls and security guide.【F:src/components/PortfolioControls.jsx†L65-L209】 | Same raw error exposure as Erin complicates compliance checks. **(Major / High)**【F:src/components/PortfolioControls.jsx†L89-L118】 | Compliance team escalates false incidents when encountering opaque errors. | Share the improved error mapping from Erin’s flow and attach request IDs automatically. |

## Sofia “Ops” Ramirez
| Flow | Step & Goal | What Sofia Sees/Does | Pain (Severity/Confidence) | Risk if Unresolved | Proposed Improvement |
| --- | --- | --- | --- | --- | --- |
| Daily Cash & Interest | Verify nightly close health | Checks Admin tab after `runDailyClose` executes and scans docs for expectations.【F:server/jobs/daily_close.js†L103-L200】【F:docs/playbooks/frontend-operations.md†L50-L53】 | Admin tab does not auto-refresh every 15s as the playbook requires. **(Major / High)**【F:src/components/AdminTab.jsx†L356-L407】【F:docs/playbooks/frontend-operations.md†L50-L53】 | Missed lockouts or stale caches until manual refresh; violates runbook. | Start an interval (respecting `VITE_ADMIN_POLL_INTERVAL_MS`) to poll metrics/events automatically. |
| Daily Cash & Interest | Detect stale pricing after nightly job | `runDailyClose` writes `stale_price` but UI never surfaces it.【F:server/jobs/daily_close.js†L161-L188】【bcc592†L1-L1】 | Operators lack visibility into stale data until API returns 503. **(Major / High)** | SLA breaches because Ops misses early warning. | Expose `stale_price` via Admin dashboard badge and include it in alerts. |

## Jamal “Quant” Lee
| Flow | Step & Goal | What Jamal Sees/Does | Pain (Severity/Confidence) | Risk if Unresolved | Proposed Improvement |
| --- | --- | --- | --- | --- | --- |
| ROI vs Benchmarks | Export data for modelling | Uses performance CSV to feed analytics pipelines.【F:src/components/ReportsTab.jsx†L49-L90】 | CSV only exports portfolio & SPY columns; blended/ex-cash/cash data missing. **(Major / High)**【F:src/utils/reports.js†L115-L122】【F:src/utils/roi.js†L1-L38】 | Internal models lack benchmark components, forcing manual API calls. | Extend CSV builder to include all benchmark series present in ROI chart. |
| Import/Add Transactions | Follow README bulk import guidance | Reads README “Reports → Import” instructions.【F:README.md†L200-L210】 | Same missing import UI blocks Jamal’s scripted ingestion. **(Blocker / High)** | Automation backlog stalls; engineers implement brittle workarounds. | Provide documented API/script alternative or reintroduce UI importer. |
