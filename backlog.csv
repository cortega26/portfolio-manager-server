ID,Severity(S0-S3),Area,Component/Page,Steps to Reproduce,Expected,Actual,Root Cause,Fix,Owner,Effort,Status
CQ-001,S1,Backend & Frontend,ROI fallback,"Load a portfolio with staged deposits or dividends, disable ROI API (force fallback)",ROI chart reflects true time-weighted returns,Fallback shows 200% gain or ignores dividend,[buildRoiSeries] ignores cash flows/dividends,[Refactor fallback ROI to TWR with income support and share logic/tests with server],Backend Lead,1-2d,DONE
CQ-002,S1,Frontend Performance,ROI fallback,"Load 100k+ transactions, trigger ROI fallback",ROI renders within perf budget,Fallback loop stalls due to O(nÂ²) scans,Per-date filter rescans entire transaction list,Stream transactions once with rolling cursor/memoised balances,Frontend Lead,1-2d,DONE
CQ-003,S1,Backend API,Portfolio save,"POST portfolio with duplicate transaction uid values",Request fails with explicit duplicate error,Save succeeds but drops duplicates silently,`ensureTransactionUids` filters duplicates and logs only,Reject duplicates with 409 + issue details; extend tests,API Owner,<=2h,DONE
CQ-004,S1,Frontend Persistence,Portfolio snapshot,"Save or load a large portfolio (>5MB serialized)",Snapshot persists for offline recovery,localStorage write fails and warns,Snapshot stores full ledger in localStorage exceeding quota,Move to indexedDB or compress/trim snapshot payloads,Frontend Lead,1-2d,DONE
CQ-005,S2,Performance,Bulk price fetch,"Have 50+ tickers, trigger ROI fallback",Single aggregated price fetch with minimal payload,App fires 50+ `/prices/:symbol?range=1y` calls,Per-ticker full-history fetch despite only latest close needed,Add batched price endpoint/graph and consume minimal quote payload,Backend Lead,1-2d,DONE
CQ-006,S2,Performance,JSON storage,"Save portfolio with large transaction set",Incremental writes with bounded IO,Each save rewrites entire table JSON,`JsonTableStorage` rewrites whole array for every upsert/delete,Introduce append-only/chunked storage with compaction,API Owner,1-2d,DONE
CQ-007,S2,UX/I18n,Holdings & Transactions tables,"View holdings in locale with grouping (e.g. de-DE)",Shares display with locale-aware separators and precision,`toFixed(4)` strips locale/precision,Share display hardcodes four decimals without Intl formatting,Use `formatNumber` with configurable precision & locale,Frontend Lead,<=2h,DONE
CQ-008,S2,Accessibility,Toast notifications,"Switch app to Spanish, inspect toast close button via screen reader",Localized aria-label,Screen reader announces English "Dismiss notification",Dismiss button bypasses i18n,Pipe label through `useI18n` + add tests,Frontend Lead,<=2h,DONE
CQ-009,S2,Testing,ROI unit/property tests,"Inspect `src/__tests__/roi*.js` for dividend coverage",Tests cover cash/income cases,Fallback regression ships undetected,Test suite lacks dividend/withdrawal assertions,Add Vitest/property tests for income & cash-flow scenarios,QA/Test Lead,<=2h,DONE
CQ-010,S2,Maintainability,server/app.js,"Open `server/app.js`, review diff",Readable, lintable modules,File is minified into 74 mega-lines,Hasty build artifact checked in,Restore formatted source or split modules; enforce formatter in CI,Backend Lead,1-2d,DONE
